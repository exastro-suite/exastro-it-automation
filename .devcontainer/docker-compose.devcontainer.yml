version: '3.7'
services:
  ita-init-containers:
    image: busybox:stable
    volumes:
      - ../.volumes/storage:/storage
    command: "sh -c 'chmod 777 /storage'"
  ita-api-organization:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    command: "python3 -m debugpy --listen 5678 /exastro/api.py"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_api_organization/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_api_organization/messages:cached
      - ../ita_root/ita_api_organization:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/ita_api_organization/config/httpd.conf/httpd.conf:/etc/httpd/conf/httpd.conf:cached
      - ../ita_root/ita_api_organization/config/httpd.conf/wsgi.conf:/etc/httpd/conf.d/wsgi.conf:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-api-organization/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-api-organization/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-api-organization/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-auth,platform-api,ita-api-oase-receiver
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-auth,platform-api,ita-api-oase-receiver
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-api-admin:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    command: "python3 -m debugpy --listen 5678 /exastro/api.py"
    # command: bash -c "chmod -R 777 /storage && python3 -m debugpy --listen 5678 /exastro/api.py"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_api_admin/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_api_admin/messages:cached
      - ../ita_root/ita_api_admin:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/ita_api_admin/config/httpd.conf/httpd.conf:/etc/httpd/conf/httpd.conf:cached
      - ../ita_root/ita_api_admin/config/httpd.conf/wsgi.conf:/etc/httpd/conf.d/wsgi.conf:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-api-admin/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-api-admin/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-api-admin/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-auth,platform-api,ita-api-oase-receiver
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-auth,platform-api,ita-api-oase-receiver
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-web-server:
    build:
      secrets:
        - host_certificate_file
    volumes:
      - ../ita_root/ita_web_server/contents/:/var/www/html/:cached
      - ../ita_root/ita_web_server/config/httpd.conf/httpd.conf:/etc/httpd/conf/httpd.conf:cached
      - ../.vscode_extensions/ita-web-server/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-web-server/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions

  phpmyadmin:
    image: phpmyadmin/phpmyadmin
    depends_on:
      - ita-mariadb
    environment:
      - PMA_ARBITRARY=1
      - PMA_HOSTS=ita-mariadb
    ports:
      - "8080:80"
    volumes:
      - ../.volumes/phpmyadmin/sessions:/sessions
      - ../.vscode_extensions/phpmyadmin/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/phpmyadmin/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    networks:
      - exastro

  ita-by-ansible-execute:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    entrypoint: /bin/sh -c "while :; do sleep 1000; done"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_by_ansible_execute/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_by_ansible_execute/messages:cached
      - ../ita_root/backyard:/workspace/ita_root/ita_by_ansible_execute/backyard:cached
      - ../ita_root/ita_by_ansible_execute:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/backyard:/exastro/backyard:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-by-ansible-execute/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-by-ansible-execute/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-by-ansible-execute/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,192.168.141.90,platform-api
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,192.168.141.90,platform-api
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-by-ansible-legacy-role-vars-listup:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    entrypoint: /bin/sh -c "while :; do sleep 1000; done"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_by_ansible_legacy_role_vars_listup/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_by_ansible_legacy_role_vars_listup/messages:cached
      - ../ita_root/backyard:/workspace/ita_root/ita_by_ansible_legacy_role_vars_listup/backyard:cached
      - ../ita_root/ita_by_ansible_legacy_role_vars_listup:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/backyard:/exastro/backyard:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-by-ansible-legacy-role-vars-listup/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-by-ansible-legacy-role-vars-listup/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-by-ansible-legacy-role-vars-listup/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-by-ansible-legacy-vars-listup:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    entrypoint: /bin/sh -c "while :; do sleep 1000; done"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_by_ansible_legacy_vars_listup/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_by_ansible_legacy_vars_listup/messages:cached
      - ../ita_root/backyard:/workspace/ita_root/ita_by_ansible_legacy_vars_listup/backyard:cached
      - ../ita_root/ita_by_ansible_legacy_vars_listup:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/backyard:/exastro/backyard:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-by-ansible-legacy-vars-listup/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-by-ansible-legacy-vars-listup/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-by-ansible-legacy-vars-listup/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-by-ansible-pioneer-vars-listup:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    entrypoint: /bin/sh -c "while :; do sleep 1000; done"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_by_ansible_pioneer_vars_listup/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_by_ansible_pioneer_vars_listup/messages:cached
      - ../ita_root/backyard:/workspace/ita_root/ita_by_ansible_pioneer_vars_listup/backyard:cached
      - ../ita_root/ita_by_ansible_pioneer_vars_listup:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/backyard:/exastro/backyard:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-by-ansible-pioneer-vars-listup/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-by-ansible-pioneer-vars-listup/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-by-ansible-pioneer-vars-listup/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-by-ansible-towermaster-sync:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    entrypoint: /bin/sh -c "while :; do sleep 1000; done"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_by_ansible_towermaster_sync/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_by_ansible_towermaster_sync/messages:cached
      - ../ita_root/backyard:/workspace/ita_root/ita_by_ansible_towermaster_sync/backyard:cached
      - ../ita_root/ita_by_ansible_towermaster_sync:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/backyard:/exastro/backyard:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-by-ansible-towermaster-sync/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-by-ansible-towermaster-sync/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-by-ansible-towermaster-sync/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-by-collector:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    entrypoint: /bin/sh -c "while :; do sleep 1000; done"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_by_collector/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_by_collector/messages:cached
      - ../ita_root/backyard:/workspace/ita_root/ita_by_collector/backyard:cached
      - ../ita_root/ita_by_collector:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/backyard:/exastro/backyard:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-by-collector/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-by-collector/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-by-collector/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-by-conductor-synchronize:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    entrypoint: /bin/sh -c "while :; do sleep 1000; done"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_by_conductor_synchronize/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_by_conductor_synchronize/messages:cached
      - ../ita_root/backyard:/workspace/ita_root/ita_by_conductor_synchronize/backyard:cached
      - ../ita_root/ita_by_conductor_synchronize:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/backyard:/exastro/backyard:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-by-conductor-synchronize/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-by-conductor-synchronize/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-by-conductor-synchronize/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-by-conductor-regularly:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    entrypoint: /bin/sh -c "while :; do sleep 1000; done"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_by_conductor_regularly/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_by_conductor_regularly/messages:cached
      - ../ita_root/backyard:/workspace/ita_root/ita_by_conductor_regularly/backyard:cached
      - ../ita_root/ita_by_conductor_regularly:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/backyard:/exastro/backyard:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-by-conductor-regularly/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-by-conductor-regularly/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-by-conductor-regularly/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-by-menu-create:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    entrypoint: /bin/sh -c "while :; do sleep 1000; done"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_by_menu_create/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_by_menu_create/messages:cached
      - ../ita_root/backyard:/workspace/ita_root/ita_by_menu_create/backyard:cached
      - ../ita_root/ita_by_menu_create:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/backyard:/exastro/backyard:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-by-menu-create/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-by-menu-create/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-by-menu-create/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-by-menu-export-import:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    entrypoint: /bin/sh -c "while :; do sleep 1000; done"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_by_menu_export_import/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_by_menu_export_import/messages:cached
      - ../ita_root/backyard:/workspace/ita_root/ita_by_menu_export_import/backyard:cached
      - ../ita_root/ita_by_menu_export_import:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/backyard:/exastro/backyard:cached
      - ../ita_root/ita_migration/versions:/exastro/versions:cached
      - ../ita_root/ita_migration/version.list:/exastro/version.list:cached
      - ../ita_root/ita_api_admin/sql:/exastro/sql:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-by-menu-export-import/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-by-menu-export-import/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-by-menu-export-import/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-by-excel-export-import:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    entrypoint: /bin/sh -c "while :; do sleep 1000; done"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_by_excel_export_import/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_by_excel_export_import/messages:cached
      - ../ita_root/backyard:/workspace/ita_root/ita_by_excel_export_import/backyard:cached
      - ../ita_root/ita_by_excel_export_import:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/backyard:/exastro/backyard:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-by-excel-export-import/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-by-excel-export-import/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-by-excel-export-import/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-by-terraform-cloud-ep-execute:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    entrypoint: /bin/sh -c "while :; do sleep 1000; done"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_by_terraform_cloud_ep_execute/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_by_terraform_cloud_ep_execute/messages:cached
      - ../ita_root/backyard:/workspace/ita_root/ita_by_terraform_cloud_ep_execute/backyard:cached
      - ../ita_root/ita_by_terraform_cloud_ep_execute:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/backyard:/exastro/backyard:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-by-terraform-cloud-ep-execute/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-by-terraform-cloud-ep-execute/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-by-terraform-cloud-ep-execute/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-by-terraform-cloud-ep-vars-listup:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    entrypoint: /bin/sh -c "while :; do sleep 1000; done"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_by_terraform_cloud_ep_vars_listup/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_by_terraform_cloud_ep_vars_listup/messages:cached
      - ../ita_root/backyard:/workspace/ita_root/ita_by_terraform_cloud_ep_vars_listup/backyard:cached
      - ../ita_root/ita_by_terraform_cloud_ep_vars_listup:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/backyard:/exastro/backyard:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-by-terraform-cloud-ep-vars-listup/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-by-terraform-cloud-ep-vars-listup/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-by-terraform-cloud-ep-vars-listup/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-by-terraform-cli-execute:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    entrypoint: /bin/sh -c "while :; do sleep 1000; done"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_by_terraform_cli_execute/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_by_terraform_cli_execute/messages:cached
      - ../ita_root/backyard:/workspace/ita_root/ita_by_terraform_cli_execute/backyard:cached
      - ../ita_root/ita_by_terraform_cli_execute:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/backyard:/exastro/backyard:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-by-terraform-cli-execute/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-by-terraform-cli-execute/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-by-terraform-cli-execute/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-by-terraform-cli-vars-listup:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    entrypoint: /bin/sh -c "while :; do sleep 1000; done"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_by_terraform_cli_vars_listup/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_by_terraform_cli_vars_listup/messages:cached
      - ../ita_root/backyard:/workspace/ita_root/ita_by_terraform_cli_vars_listup/backyard:cached
      - ../ita_root/ita_by_terraform_cli_vars_listup:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/backyard:/exastro/backyard:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-by-terraform-cli-vars-listup/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-by-terraform-cli-vars-listup/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-by-terraform-cli-vars-listup/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-by-hostgroup-split:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    entrypoint: /bin/sh -c "while :; do sleep 1000; done"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_by_hostgroup_split/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_by_hostgroup_split/messages:cached
      - ../ita_root/backyard:/workspace/ita_root/ita_by_hostgroup_split/backyard:cached
      - ../ita_root/ita_by_hostgroup_split:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/backyard:/exastro/backyard:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-by-hostgroup-split/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-by-hostgroup-split/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-by-hostgroup-split/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-by-cicd-for-iac:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    entrypoint: /bin/sh -c "while :; do sleep 1000; done"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_by_cicd_for_iac/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_by_cicd_for_iac/messages:cached
      - ../ita_root/backyard:/workspace/ita_root/ita_by_cicd_for_iac/backyard:cached
      - ../ita_root/ita_by_cicd_for_iac:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/backyard:/exastro/backyard:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-by-cicd-for-iac/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-by-cicd-for-iac/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-by-cicd-for-iac/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-by-execinstance-dataautoclean:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    entrypoint: /bin/sh -c "while :; do sleep 1000; done"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_by_execinstance_dataautoclean/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_by_execinstance_dataautoclean/messages:cached
      - ../ita_root/backyard:/workspace/ita_root/ita_by_execinstance_dataautoclean/backyard:cached
      - ../ita_root/ita_by_execinstance_dataautoclean:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/backyard:/exastro/backyard:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-by-execinstance-dataautoclean/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-by-execinstance-dataautoclean/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-by-execinstance-dataautoclean/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-by-file-autoclean:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    entrypoint: /bin/sh -c "while :; do sleep 1000; done"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_by_file_autoclean/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_by_file_autoclean/messages:cached
      - ../ita_root/backyard:/workspace/ita_root/ita_by_file_autoclean/backyard:cached
      - ../ita_root/ita_by_file_autoclean:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/backyard:/exastro/backyard:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-by-file-autoclean/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-by-file-autoclean/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-by-file-autoclean/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-migration:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_migration/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_migration/messages:cached
      - ../ita_root/ita_migration:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-migration/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-migration/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-migration/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt


  ita-api-ansible-execution-receiver:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    command: "python3 -m debugpy --listen 5678 /exastro/api.py"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_api_ansible_execution_receiver/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_api_ansible_execution_receiver/messages:cached
      - ../ita_root/ita_api_ansible_execution_receiver:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/ita_api_ansible_execution_receiver/config/httpd.conf/httpd.conf:/etc/httpd/conf/httpd.conf:cached
      - ../ita_root/ita_api_ansible_execution_receiver/config/httpd.conf/wsgi.conf:/etc/httpd/conf.d/wsgi.conf:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-api-ansible-execution-receiver/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-api-ansible-execution-receiver/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-api-ansible-execution-receiver/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-auth,platform-api,ita-api-ansible-execution-receiver
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-auth,platform-api,ita-api-ansible-execution-receiver
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-api-oase-receiver:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    command: "python3 -m debugpy --listen 5678 /exastro/api.py"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_api_oase_receiver/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_api_oase_receiver/messages:cached
      - ../ita_root/ita_api_oase_receiver:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/ita_api_oase_receiver/config/httpd.conf/httpd.conf:/etc/httpd/conf/httpd.conf:cached
      - ../ita_root/ita_api_oase_receiver/config/httpd.conf/wsgi.conf:/etc/httpd/conf.d/wsgi.conf:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-api-oase-receiver/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-api-oase-receiver/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-api-oase-receiver/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-auth,platform-api,ita-api-oase-receiver
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-auth,platform-api,ita-api-oase-receiver
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt


  ita-by-oase-conclusion:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    entrypoint: /bin/sh -c "while :; do sleep 1000; done"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_by_oase_conclusion/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_by_oase_conclusion/messages:cached
      - ../ita_root/backyard:/workspace/ita_root/ita_by_oase_conclusion/backyard:cached
      - ../ita_root/ita_by_oase_conclusion:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/backyard:/exastro/backyard:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-by-oase-conclusion/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-by-oase-conclusion/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-by-oase-conclusion/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api,ita-api-oase-receiver
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api,ita-api-oase-receiver
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt

  ita-oase-mailserver:
    build:
      dockerfile: ./ita_root/ita_oase_mailserver/Dockerfile
      context: ../.
      args:
        - HTTP_PROXY=${HTTP_PROXY}
        - http_proxy=${HTTP_PROXY}
        - HTTPS_PROXY=${HTTPS_PROXY}
        - https_proxy=${HTTPS_PROXY}
      secrets:
        - host_certificate_file
    hostname: ita-oase-mailserver
    environment:
      - TZ=Asia/Tokyo
    volumes:
      - ../ita_root/ita_oase_mailserver/conf/dovecot/dovecot.conf:/etc/dovecot/dovecot.conf
      - ../ita_root/ita_oase_mailserver/conf/postfix/main.cf:/etc/postfix/main.cf
    tty: true
    privileged: true
    command: /sbin/init
    ports:
      - "0.0.0.0:25:25" # SMTP
      - "0.0.0.0:143:143" # IMAP
      - "0.0.0.0:587:587" # StartTLS
      - "0.0.0.0:993:993" # IMAPS
    networks:
      - exastro
    profiles:
      - ita-ag-oase

  ita-ag-oase:
    build:
      target: develop_build
      secrets:
        - host_certificate_file
    entrypoint: /bin/sh -c "while :; do sleep 1000; done"
    volumes:
      - ..:/workspace:cached
      - ../ita_root/common_libs:/workspace/ita_root/ita_ag_oase/common_libs:cached
      - ../ita_root/messages:/workspace/ita_root/ita_ag_oase/messages:cached
      - ../ita_root/agent:/workspace/ita_root/ita_ag_oase/agent:cached
      - ../ita_root/ita_ag_oase:/exastro:cached
      - ../ita_root/common_libs:/exastro/common_libs:cached
      - ../ita_root/messages:/exastro/messages:cached
      - ../ita_root/agent:/exastro/agent:cached
      - ~/.netrc:/home/app_user/.netrc
      - ~/.gitconfig:/home/app_user/.gitconfig
      - ./ita-ag-oase/.vscode/launch.json:/workspace/.vscode/launch.json
      - /usr/share/pki/ca-trust-source/anchors/UserRootCertificate.crt:/etc/ssl/certs/ca-certificates.crt
      - /mnt/mainte/talisman/.talismanrc:/mnt/mainte/talisman/.talismanrc
      - ~/.config/git/ignore:/home/app_user/.config/git/ignore
      - ${TALISMAN_HOME}:${TALISMAN_HOME}
      - ../.vscode_extensions/ita-ag-oase/.vscode-server/extensions:/home/app_user/.vscode-server/extensions
      - ../.vscode_extensions/ita-ag-oase/.vscode-server-insiders/extensions:/home/app_user/.vscode-server-insiders/extensions
    environment:
      - HTTP_PROXY=${HTTP_PROXY}
      - http_proxy=${HTTP_PROXY}
      - HTTPS_PROXY=${HTTPS_PROXY}
      - https_proxy=${HTTPS_PROXY}
      - NO_PROXY=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api,platform-auth,ita-api-oase-receiver
      - no_proxy=localhost,127.0.0.1,ita-api-organization,ita-api-admin,ita-web-server,platform-api,platform-auth,ita-api-oase-receiver
      - SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
      - SSL_CERT_DIR=/etc/ssl/certs
      - NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt


  # mongo-express:
  #   image: mongo-express
  #   depends_on:
  #     - ita-mongodb
  #   environment:
  #     - ME_CONFIG_MONGODB_ADMINUSERNAME=${MONGO_INITDB_ROOT_USERNAME}
  #     - ME_CONFIG_MONGODB_ADMINPASSWORD=${MONGO_INITDB_ROOT_PASSWORD}
  #     - ME_CONFIG_MONGODB_SERVER=ita-mongodb
  #   ports:
  #     - "8080:8081"
  #   profiles:
  #     - ita-oase
  #   networks:
  #     - exastro

secrets:
  host_certificate_file:
    file: ${HOST_CERTIFICATE_FILE:-/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem}
